# Get editor completions based on the config schema
"$schema" = 'https://starship.rs/config-schema.json'
format = """
$os\
$username\
$hostname\
$directory\
$git_branch\
$git_metrics\
$git_status\
$kubernetes\
$gcloud\
$terraform\
$docker_context\
${custom.ansible}\
${custom.net_status}\
$line_break\
$character"""

# --- CORE PROMPT ---
[character]
success_symbol = "[â¯](bold green) "
error_symbol = "[â¯](bold red) "

[directory]
style = "bold cyan"
truncation_length = 3
truncate_to_repo = true
read_only = " ğŸ”’"

[cmd_duration]
min_time = 2_000
format = "took [$duration]($style) "
style = "bold yellow"

[os]
disabled = false

[hostname]
ssh_only = true
format = "[$hostname](bold red) "
disabled = false

[username]
style_user = "white bold"
style_root = "black bold"
format = "[$user]($style)@"
disabled = false
show_always = false 

# --- GIT ---
[git_branch]
symbol = "ï˜ "
format = "[$symbol$branch]($style) "
style = "bold magenta"

[git_status]
format = "([$all_status$ahead_behind]($style) )"
style = "bold yellow"

[git_metrics]
added_style = "bold green"
deleted_style = "bold red"
disabled = false
only_nonzero_diffs = true

# --- CLOUD & INFRA (Right Side) ---
[kubernetes]
disabled = false
symbol = "â›µ " 
# Removed the word 'context' to save space
format = 'at [$symbol$context \($namespace\)](bold dimmed purple) '

[docker_context]
symbol = "ïŒˆ "
format = "[$symbol$context](dimmed blue) "

[terraform]
format = "[ó±¢ $workspace](dimmed 105) "

[gcloud]
format = "[â˜ï¸ $project](dimmed yellow) "

# --- CUSTOM MODULES ---
[custom.ansible]
description = "Show Ansible icon when in a playbook directory"
detect_files = ['ansible.cfg', 'inventory.ini']
detect_folders = ['roles', 'playbooks']
symbol = "ó±‚š "
style = "dimmed white"
format = "[$symbol]($style) "

[custom.net_status]
command = "if ip addr show | grep -E 'tun0|wg0' > /dev/null; then echo 'ğŸ›¡ï¸'; else echo 'ğŸŒ'; fi"
when = "true"
format = "[$output]($style) "
